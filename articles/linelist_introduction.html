<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An introduction to linelist • linelist</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="An introduction to linelist">
<meta property="og:description" content="linelist">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">linelist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/linelist_introduction.html">An introduction to linelist</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/epiverse-trace/linelist/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="linelist_introduction_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>An introduction to linelist</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/linelist/blob/HEAD/vignettes/linelist_introduction.Rmd" class="external-link"><code>vignettes/linelist_introduction.Rmd</code></a></small>
      <div class="hidden name"><code>linelist_introduction.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/linelist" class="external-link">linelist</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="motivations">Motivations<a class="anchor" aria-label="anchor" href="#motivations"></a>
</h2>
<p>Outbreak analytics pipelines often start with <em>case line lists</em>, which are data tables in which every line is a different case/patient, and columns record different variables of potential epidemiological interest such as date of events (e.g. onset of symptom, case notification), disease outcome, or patient data (e.g. age, sex, occupation). Such data is typically held in a <code>data.frame</code> (or a <code>tibble</code>) and used in various downstream analysis. While this approach is functional, it often means that each analysis step will:</p>
<ol style="list-style-type: decimal">
<li><p>need to check the required inputs are present in the data, and for the user to specify where (e.g. ‘<em>This is the column where dates of onset are stored.</em>’)</p></li>
<li><p>need to validate the required data (e.g. ‘<em>Check that the field storing dates of onset are indeed dates, and not a <code>character</code>.</em>’)</p></li>
</ol>
<p>The aim of <em>linelist</em> is to take care of these pre-requisites once and for all before downstream analyses, thus helping to make data pipelines more robust and straightforward.</p>
</div>
<div class="section level2">
<h2 id="linelist-in-a-nutshell">linelist in a nutshell<a class="anchor" aria-label="anchor" href="#linelist-in-a-nutshell"></a>
</h2>
<div class="section level3">
<h3 id="outline">Outline<a class="anchor" aria-label="anchor" href="#outline"></a>
</h3>
<p><em>linelist</em> is an R package which implements basic data representation for case line lists, alongside accessors and basic methods. It essentially provides three types of functionalities:</p>
<ol style="list-style-type: decimal">
<li><p><strong>tagging</strong>: a <em>tags</em> system permits to pre-identify key epidemiological variables needed in downstream analyses (e.g. dates of case notification, symptom onset, age, gender, disease outcome)</p></li>
<li><p><strong>validation</strong>: functions checking that tagged variables are indeed present in the <code>data.frame/tibble</code>, and that they have the expected type (e.g. checking that dates are <code>Date</code>, <code>integer</code> or <code>numeric</code>)</p></li>
<li><p><strong>secured methods</strong>: generic functions which could lead to the loss of tagged variables have dedicated methods for <em>linelist</em> objects with adapted behaviours, either updating tags as needed (<em>e.g.</em> <code>rename</code>, <code>names() &lt;- ...</code>) or issuing warnings/errors when tagged variables are lost (<em>e.g.</em> <code>select</code>, <code>x[]</code>, <code>x[[]]</code>)</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="should-i-use-linelist">Should I use <em>linelist</em>?<a class="anchor" aria-label="anchor" href="#should-i-use-linelist"></a>
</h3>
<p><em>linelist</em> is designed to add a robust, foundational layer to your data pipelines, but it might add unnecessary complexity to your analysis scripts. Here are a few hints to gauge if you should consider using the package.</p>
<p><strong>You may have use for <em>linelist</em> if …</strong>:</p>
<ul>
<li><p>your data changes/updates over time (e.g. new entries, new variables, renamed variables)</p></li>
<li><p>you build data pipelines entailing multiple layers of data processing and analysis</p></li>
<li><p>you are looking to build re-useable analysis scripts, <em>i.e.</em> which will work on other datasets with minimal added changes</p></li>
</ul>
<p><strong>Conversely, you probably do not need it if …</strong>:</p>
<ul>
<li><p>you work on historical data, which has likely already been curated/validated and will no longer change</p></li>
<li><p>you perform some quick, simple analysis of your data, which you will not need to expand on later</p></li>
<li><p>your analysis scripts are very specific and will not be re-used elsewhere</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>Our stable versions are released periodically on CRAN, and can be installed using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"linelist"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If you prefer using the latest features and bug fixes, you can alternatively install the development version of <em>linelist</em> from <a href="https://github.com/" class="external-link">GitHub</a> using the following commands:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"epiverse-trace/linelist"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Once installed, you can load the package in your R session using:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/linelist" class="external-link">linelist</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="key-functionalities">Key functionalities<a class="anchor" aria-label="anchor" href="#key-functionalities"></a>
</h3>
<p>A <code>linelist</code> object is an instance of a <code>data.frame</code> or a <code>tibble</code> in which key epidemiological variables have been <em>tagged</em>. The main features of the packages are broken down into the 3 categories outlined above.</p>
<div class="section level4">
<h4 id="tagging-system">Tagging system<a class="anchor" aria-label="anchor" href="#tagging-system"></a>
</h4>
<p>Tags are paired keys pointing a reference epidemiological variables to the name of a column in a <code>data.frame</code> or <code>tibble</code>. The tagging system permits to construct <code>linelist</code> objects, modify tags in existing objects, check and access existing tags and the corresponding variables.</p>
<ul>
<li><p><code><a href="../reference/make_linelist.html">make_linelist()</a></code>: to create a <code>linelist</code> object by tagging key epi variables in a <code>data.frame</code> or a <code>tibble</code></p></li>
<li><p><code>set_tags():</code> to add, remove, or modify tags in a <code>linelist</code></p></li>
<li><p><code><a href="../reference/tags.html">tags()</a></code>: to list variables which have been tagged in a <code>linelist</code></p></li>
<li><p><code><a href="../reference/tags_names.html">tags_names()</a></code>: to list all recognized tag names; details on what the tags represent can be found at <a href="https://epiverse-trace.github.io/linelist/reference/make_linelist.html" class="external-link"><code>?make_linelist</code></a></p></li>
<li><p><code>select_tags():</code> to select columns of a <code>linelist</code> based on tags using <em>dplyr</em> compatible syntax</p></li>
<li><p><code><a href="../reference/tags_df.html">tags_df()</a></code>: to obtain a <code>data.frame</code> of all the tagged variables in a <code>linelist</code></p></li>
</ul>
</div>
<div class="section level4">
<h4 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a>
</h4>
<p>Basic routines are provided to validate <em>linelist</em> objects. More advanced validation e.g. looking at compatibility of dated events will be implemented in a separate package.</p>
<ul>
<li><p><code><a href="../reference/validate_tags.html">validate_tags()</a></code>: check that tagged variables are present in the dataset, that tags match the pre-defined list of tagged variables</p></li>
<li><p><code><a href="../reference/validate_types.html">validate_types()</a></code>: check that tagged variables have an acceptable class, as defined in <code><a href="../reference/tags_types.html">tags_types()</a></code></p></li>
<li><p><code><a href="../reference/validate_linelist.html">validate_linelist()</a></code>: general validation of <em>linelist</em> objects, equivalent to running both <code><a href="../reference/validate_tags.html">validate_tags()</a></code> and <code><a href="../reference/validate_types.html">validate_types()</a></code>, and checking the class of the object</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="secured-methods">Secured methods<a class="anchor" aria-label="anchor" href="#secured-methods"></a>
</h4>
<p>These are dedicated S3 methods for existing generics which can be used to prevent the loss of tagged variables.</p>
<ul>
<li><p><code>lost_tags_actions()</code>: to set the behaviour to adopt when tagged variables would be lost by an operation: issue a warning (default), an error, or ignore</p></li>
<li><p><code>get_lost_tags_actions()</code>: to check the current behaviour for lost tagged variables</p></li>
<li><p><code>rename</code>: adapted from <code><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">dplyr::rename</a></code>, to rename columns of a <code>linelist</code>; will rename tags as needed to match the new column names</p></li>
<li><p><code>names(x) &lt;-</code>: same as <code>rename</code>, but using the ‘base R’ approach to renaming columns</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>: adapted from <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select</a></code>, for subsetting columns; an additional argument can be used to subset tagged variables as well; will behave according to <code>get_lost_tags_actions()</code> if tagged variables are lost</p></li>
<li><p><code>x[]</code> and <code>x[[]]</code>: same as <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select</a></code> but using ‘base R’ syntax; will behave according to <code>get_lost_tags_actions()</code> if tagged variables are lost</p></li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="worked-example">Worked example<a class="anchor" aria-label="anchor" href="#worked-example"></a>
</h2>
<div class="section level3">
<h3 id="example-dataset">Example dataset<a class="anchor" aria-label="anchor" href="#example-dataset"></a>
</h3>
<p>In this example, we use the case line list of the Hagelloch 1861 measles outbreak, distributed by the <em>outbreaks</em> pacakge as <code>measles_hagelloch_1861</code> .</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># load libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/reconhub/outbreaks" class="external-link">outbreaks</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># overview of the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">measles_hagelloch_1861</span><span class="op">)</span></span>
<span><span class="co">#&gt;   case_ID infector date_of_prodrome date_of_rash date_of_death age gender</span></span>
<span><span class="co">#&gt; 1       1       45       1861-11-21   1861-11-25          &lt;NA&gt;   7      f</span></span>
<span><span class="co">#&gt; 2       2       45       1861-11-23   1861-11-27          &lt;NA&gt;   6      f</span></span>
<span><span class="co">#&gt; 3       3      172       1861-11-28   1861-12-02          &lt;NA&gt;   4      f</span></span>
<span><span class="co">#&gt; 4       4      180       1861-11-27   1861-11-28          &lt;NA&gt;  13      m</span></span>
<span><span class="co">#&gt; 5       5       45       1861-11-22   1861-11-27          &lt;NA&gt;   8      f</span></span>
<span><span class="co">#&gt; 6       6      180       1861-11-26   1861-11-29          &lt;NA&gt;  12      m</span></span>
<span><span class="co">#&gt;   family_ID class complications x_loc y_loc</span></span>
<span><span class="co">#&gt; 1        41     1           yes 142.5 100.0</span></span>
<span><span class="co">#&gt; 2        41     1           yes 142.5 100.0</span></span>
<span><span class="co">#&gt; 3        41     0           yes 142.5 100.0</span></span>
<span><span class="co">#&gt; 4        61     2           yes 165.0 102.5</span></span>
<span><span class="co">#&gt; 5        42     1           yes 145.0 120.0</span></span>
<span><span class="co">#&gt; 6        42     2           yes 145.0 120.0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-a-linelist-object">Creating a <em>linelist</em> object<a class="anchor" aria-label="anchor" href="#creating-a-linelist-object"></a>
</h3>
<p>Let us assume we want to tag the following variables to facilitate downstream analyses, after having checked their tag name in <code><a href="../reference/make_linelist.html">?make_linelist</a></code>:</p>
<ul>
<li>the date of symptom onset, here called <code>prodrome</code> (tag: <code>date_onset</code>)</li>
<li>the date of death (tag: <code>date_death</code>)</li>
<li>the age of the patient (tag: <code>age</code>)</li>
<li>the gender of the patient (tag: <code>gender</code>)</li>
</ul>
<p>We first load a few useful packages, and create a <code>linelist</code> with the above information:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span> <span class="co"># data.frame but with nice printing </span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># for data handling</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># for the %&gt;% operator</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/linelist" class="external-link">linelist</a></span><span class="op">)</span> <span class="co"># this package!</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">measles_hagelloch_1861</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/make_linelist.html">make_linelist</a></span><span class="op">(</span>date_onset <span class="op">=</span> <span class="st">"date_of_prodrome"</span>,</span>
<span>                date_death <span class="op">=</span> <span class="st">"date_of_death"</span>,</span>
<span>                age <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>                gender <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 188 × 12</span></span></span>
<span><span class="co">#&gt;    case_ID infector date_of_p…¹ date_of_…² date_of_…³   age gender famil…⁴ class</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 1861-11-21  1861-11-25 <span style="color: #BB0000;">NA</span>             7 f           41 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 1861-11-23  1861-11-27 <span style="color: #BB0000;">NA</span>             6 f           41 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 1861-11-28  1861-12-02 <span style="color: #BB0000;">NA</span>             4 f           41 0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 1861-11-27  1861-11-28 <span style="color: #BB0000;">NA</span>            13 m           61 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 1861-11-22  1861-11-27 <span style="color: #BB0000;">NA</span>             8 f           42 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 1861-11-26  1861-11-29 <span style="color: #BB0000;">NA</span>            12 m           42 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 1861-11-24  1861-11-28 <span style="color: #BB0000;">NA</span>             6 m           26 0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 1861-11-21  1861-11-26 <span style="color: #BB0000;">NA</span>            10 m           44 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 1861-11-26  1861-11-30 <span style="color: #BB0000;">NA</span>            13 m           44 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 1861-11-21  1861-11-25 <span style="color: #BB0000;">NA</span>             7 f           29 1    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 178 more rows, 3 more variables: complications &lt;fct&gt;, x_loc &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   y_loc &lt;dbl&gt;, and abbreviated variable names ¹​date_of_prodrome,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​date_of_rash, ³​date_of_death, ⁴​family_ID</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: date_onset:date_of_prodrome, date_death:date_of_death, gender:gender, age:age</span></span></code></pre></div>
<p>The printing of the object confirms that the tags have been added. If we want to double-check which variables have been tagged:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/tags.html">tags</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; $date_onset</span></span>
<span><span class="co">#&gt; [1] "date_of_prodrome"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $date_death</span></span>
<span><span class="co">#&gt; [1] "date_of_death"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $gender</span></span>
<span><span class="co">#&gt; [1] "gender"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $age</span></span>
<span><span class="co">#&gt; [1] "age"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="changing-tags">Changing tags<a class="anchor" aria-label="anchor" href="#changing-tags"></a>
</h3>
<p>Tags can be added / removed / changed using <code><a href="../reference/set_tags.html">set_tags()</a></code>.</p>
<p>Let us assume we also want to record the outcome: it is currently missing, but can be built from dates of deaths (missing date = survived). This can be done by using <code>mutate</code> on <code>x</code> to create the new variable (remember <code>x</code> is not only a <code>linelist</code>, but also a regular <code>tibble</code> and this compatible with <code>dplyr</code> verbs), and setting up a new tag using <code>set_tags</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>inferred_outcome <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">date_of_death</span><span class="op">)</span>, <span class="st">"survided"</span>, <span class="st">"died"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_tags.html">set_tags</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="st">"inferred_outcome"</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 13</span></span></span>
<span><span class="co">#&gt;    case_ID infector date_of_p…¹ date_of_…² date_of_…³   age gender famil…⁴ class</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 1861-11-21  1861-11-25 <span style="color: #BB0000;">NA</span>             7 f           41 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 1861-11-23  1861-11-27 <span style="color: #BB0000;">NA</span>             6 f           41 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 1861-11-28  1861-12-02 <span style="color: #BB0000;">NA</span>             4 f           41 0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 1861-11-27  1861-11-28 <span style="color: #BB0000;">NA</span>            13 m           61 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 1861-11-22  1861-11-27 <span style="color: #BB0000;">NA</span>             8 f           42 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 1861-11-26  1861-11-29 <span style="color: #BB0000;">NA</span>            12 m           42 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 1861-11-24  1861-11-28 <span style="color: #BB0000;">NA</span>             6 m           26 0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 1861-11-21  1861-11-26 <span style="color: #BB0000;">NA</span>            10 m           44 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 1861-11-26  1861-11-30 <span style="color: #BB0000;">NA</span>            13 m           44 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 1861-11-21  1861-11-25 <span style="color: #BB0000;">NA</span>             7 f           29 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>      11      182 1861-11-25  1861-11-30 <span style="color: #BB0000;">NA</span>            11 f           27 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>      12       45 1861-11-20  1861-11-25 <span style="color: #BB0000;">NA</span>             7 f           32 1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>      13       12 1861-11-30  1861-12-05 <span style="color: #BB0000;">NA</span>            13 m           32 2    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 4 more variables: complications &lt;fct&gt;, x_loc &lt;dbl&gt;, y_loc &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   inferred_outcome &lt;chr&gt;, and abbreviated variable names ¹​date_of_prodrome,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​date_of_rash, ³​date_of_death, ⁴​family_ID</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: date_onset:date_of_prodrome, date_death:date_of_death, gender:gender, age:age, outcome:inferred_outcome</span></span></code></pre></div>
<p>If we wanted to undo the above, i.e. remove the <code>outcome</code> tag, we only need set it to <code>NULL</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_tags.html">set_tags</a></span><span class="op">(</span>outcome <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/tags.html">tags</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; $date_onset</span></span>
<span><span class="co">#&gt; [1] "date_of_prodrome"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $date_death</span></span>
<span><span class="co">#&gt; [1] "date_of_death"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $gender</span></span>
<span><span class="co">#&gt; [1] "gender"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $age</span></span>
<span><span class="co">#&gt; [1] "age"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="accessing-tagged-variables">Accessing tagged variables<a class="anchor" aria-label="anchor" href="#accessing-tagged-variables"></a>
</h3>
<p>Now that key variables have been tagged in <code>x</code>, we can used these pre-defined fields in downstream analyses, without having to worry about variable names and types. We could access tagged variables using any of the following means:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># select tagged variables only</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/select_tags.html">select_tags</a></span><span class="op">(</span><span class="va">date_onset</span>, <span class="va">date_death</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 2</span></span></span>
<span><span class="co">#&gt;    date_onset date_death</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1861-11-21 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1861-11-23 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1861-11-28 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1861-11-27 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1861-11-22 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1861-11-26 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1861-11-24 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1861-11-21 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1861-11-26 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1861-11-21 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 1861-11-25 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 1861-11-20 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 1861-11-30 <span style="color: #BB0000;">NA</span></span></span>
<span></span>
<span><span class="co"># select tagged variables only with renaming on the fly</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/select_tags.html">select_tags</a></span><span class="op">(</span>onset <span class="op">=</span> <span class="va">date_onset</span>, <span class="va">date_death</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 2</span></span></span>
<span><span class="co">#&gt;    onset      date_death</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1861-11-21 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1861-11-23 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1861-11-28 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1861-11-27 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1861-11-22 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1861-11-26 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1861-11-24 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1861-11-21 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1861-11-26 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1861-11-21 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 1861-11-25 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 1861-11-20 <span style="color: #BB0000;">NA</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 1861-11-30 <span style="color: #BB0000;">NA</span></span></span>
<span></span>
<span><span class="co"># get all tagged variables in a data.frame</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/tags_df.html">tags_df</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 4</span></span></span>
<span><span class="co">#&gt;    date_onset date_death gender   age</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1861-11-21 <span style="color: #BB0000;">NA</span>         f          7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1861-11-23 <span style="color: #BB0000;">NA</span>         f          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1861-11-28 <span style="color: #BB0000;">NA</span>         f          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1861-11-27 <span style="color: #BB0000;">NA</span>         m         13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1861-11-22 <span style="color: #BB0000;">NA</span>         f          8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1861-11-26 <span style="color: #BB0000;">NA</span>         m         12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1861-11-24 <span style="color: #BB0000;">NA</span>         m          6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1861-11-21 <span style="color: #BB0000;">NA</span>         m         10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1861-11-26 <span style="color: #BB0000;">NA</span>         m         13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1861-11-21 <span style="color: #BB0000;">NA</span>         f          7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 1861-11-25 <span style="color: #BB0000;">NA</span>         f         11</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 1861-11-20 <span style="color: #BB0000;">NA</span>         f          7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 1861-11-30 <span style="color: #BB0000;">NA</span>         m         13</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-safeguards">Using safeguards<a class="anchor" aria-label="anchor" href="#using-safeguards"></a>
</h3>
<p>Because <code>x</code> remains a valid <code>tibble</code>, we can use any data handling operations implemented in <code>dplyr</code>. However, some of these operations may cause accidental removal of key tagged variables. <em>linelist</em> provides a safeguard mechanism against this. For instance, let’s assume we want to select only some columns of <code>x</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># hybrid selection</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in prune_tags(out, lost_action): The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_onset:date_of_prodrome, date_death:date_of_death, gender:gender, age:age</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 2</span></span></span>
<span><span class="co">#&gt;    case_ID infector</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>      11      182</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>      12       45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>      13       12</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: [no tagged variable]</span></span></code></pre></div>
<p>Here, the above command gave a meaningful warning, in which <code>select</code> removes some of the variables that were tagged. This is because <em>linelist</em> implements a specific <code>select</code> method for <code>linelist</code> objects - see <a href="https://epiverse-trace.github.io/linelist/reference/select.linelist.html" class="external-link"><code>?select.linelist</code></a>. In fact, looking at the documentation, we can see that <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> can be used to select variables both from the dataset and from the tags, using the <code>tags = ...</code> argument. For instance, to retain the first 2 variables, and the <code>gender</code> tag:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># hybrid selection</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, tags <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in prune_tags(out, lost_action): The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_onset:date_of_prodrome, date_death:date_of_death, age:age</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 3</span></span></span>
<span><span class="co">#&gt;    case_ID infector gender</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>      11      182 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>      12       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>      13       12 m     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: gender:gender</span></span></code></pre></div>
<p>Again, we observe a warning as before due to the loss of tagged variables in the operation. This behaviour can be silenced if needed, or could be changed to issue an error (for stronger pipelines for instance):</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># hybrid selection</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, tags <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in prune_tags(out, lost_action): The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_onset:date_of_prodrome, date_death:date_of_death, age:age</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 3</span></span></span>
<span><span class="co">#&gt;    case_ID infector gender</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>      11      182 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>      12       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>      13       12 m     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: gender:gender</span></span>
<span></span>
<span><span class="co"># hybrid selection - no warning</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/lost_tags_action.html">lost_tags_action</a></span><span class="op">(</span><span class="st">"none"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, tags <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // linelist object</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 13 × 3</span></span></span>
<span><span class="co">#&gt;    case_ID infector gender</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>       1       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>       2       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>       3      172 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>       4      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>       5       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>       6      180 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>       7       42 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>       8       45 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>       9      182 m     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      10       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>      11      182 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>      12       45 f     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>      13       12 m     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; // tags: gender:gender</span></span>
<span></span>
<span><span class="co"># hybrid selection - error due to lost tags</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/lost_tags_action.html">lost_tags_action</a></span><span class="op">(</span><span class="st">"error"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, tags <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in prune_tags(out, lost_action): The following tags have lost their variable:</span></span>
<span><span class="co">#&gt;  date_onset:date_of_prodrome, date_death:date_of_death, age:age</span></span>
<span></span>
<span><span class="co"># note that `lost_tags_action` sets the behavior for any later operation, so we </span></span>
<span><span class="co"># need to reset the default</span></span>
<span><span class="fu"><a href="../reference/lost_tags_action.html">get_lost_tags_action</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># check current behaviour</span></span>
<span><span class="co">#&gt; [1] "error"</span></span>
<span><span class="fu"><a href="../reference/lost_tags_action.html">lost_tags_action</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># reset default</span></span>
<span><span class="co">#&gt; Lost tags will now issue a warning.</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Thibaut Jombart.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
